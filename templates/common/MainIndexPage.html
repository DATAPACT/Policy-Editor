    {% extends 'base.html' %}
    {%load static %}

    {% block inpagecss %}
/* Base styles */
/* https://www.color-hex.com/color-palette/1057703 */

:root {
  /* --primary-color: #1976d2;
  --secondary-color: #2196f3;
  --tertiary-color: #64b5f6; 
  --primary-color: #aaaaaa;
  --secondary-color: #bbbbbb;
  --tertiary-color: #cccccc;
  --primary-color: #72bcd4;
  --secondary-color: #86c5da;
  --tertiary-color: #99cfe0;
  --primary-color: #111184;
  --secondary-color: #3C3CE8;
  --tertiary-color: #99cfe0; */
  --primary-color: #819A91;
  --secondary-color: #A7C1A8;
  --tertiary-color: #D1D8BE;
  /* --header-primary-color: #111184;
  --header-secondary-color: #070738; */
  --header-primary-color: #819A91;
  --header-secondary-color: #A7C1A8;
  --light-gray: #f5f7fa;
  --hover-color: #e3f2fd;
  --public-color: #66bb6a;
  --private-color: #5c6bc0;
  --shadow: 0 3px 8px rgba(0, 0, 0, 0.12);
  --font-family: 'Segoe UI', Arial, sans-serif;
  --border-radius: 6px;
  --transition: all 0.25s ease;
  
  /*--primary-color_ontol: #d27519;
  --secondary-color_ontol: #f37e21;
  --tertiary-color_ontol: #f6a564;
  --primary-color_ontol: #aaaaaa;
  --secondary-color_ontol: #bbbbbb;
  --tertiary-color_ontol: #cccccc;
  --primary-color_ontol: #72bcd4;
  --secondary-color_ontol: #86c5da;
  --tertiary-color_ontol: #99cfe0;
  --primary-color_ontol: #111184;
  --secondary-color_ontol: #3C3CE8;
  --tertiary-color_ontol: #99cfe0; */
  --primary-color_ontol: #819A91;
  --secondary-color_ontol: #A7C1A8;
  --tertiary-color_ontol: #D1D8BE;
  
  --grid-button-width: 100px;
}
 
/* Navigation list styles */
ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}
 
ul li a {
  display: block;
  width: 100%;
  text-decoration: none;
  padding: 10px;
  transition: background-color 0.2s ease;
  border-radius: 4px;
}
 
ul li a:hover {
  background-color: var(--hover-color);
}

/* Main control wrapper for index */
.control_main_index_wrapper {
    width: 70%;
	display: block;
    margin-left: auto;
    margin-right: auto;
}
 
/* Form elements */
.form-select {
  color: black;
  background-color: white;
  padding: 8px;
  border-radius: 4px;
  border: 1px solid #ddd;
}
 
/* Public and private styles */
.public a {
  background: linear-gradient(to bottom right, var(--public-color), #4caf50);
  color: white;
  font-weight: 500;
  border-radius: var(--border-radius);
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);
  transition: var(--transition);
}
 
.public a:hover {
  background: linear-gradient(to bottom right, #4caf50, var(--public-color));
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.12);
}
 
.private a {
  background: linear-gradient(to bottom right, var(--private-color), #3f51b5);
  color: white;
  font-weight: 500;
  border-radius: var(--border-radius);
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);
  transition: var(--transition);
}
 
.private a:hover {
  background: linear-gradient(to bottom right, #3f51b5, var(--private-color));
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.12);
}
 
/* Grid container styles */
.container2 {

  display: none;
  min-width: 0;
  /* grid-template-columns: repeat(5, 1fr); */
  grid-template-columns: 1fr 120px 120px 120px;
  /* background-color: var(--primary-color); */
  #padding: 18px;
  padding: 2px;
  border-radius: var(--border-radius);
  #margin-bottom: 25px;
  margin-bottom: 0px;
  box-shadow: var(--shadow);
  gap: 0px;
  
}
 
.container2 > div {
  background-color: var(--light-gray);
  border: none;
  padding: 12px;
  font-size: 15px;
  text-align: center;
  border-radius: calc(var(--border-radius) - 2px);
  transition: var(--transition);
}

.container2_ontol {
  display: none;
  grid-template-columns: repeat(4, 1fr);
  background-color: var(--primary-color_ontol);
  #padding: 18px;
  padding: 9px;
  border-radius: var(--border-radius);
  #margin-bottom: 25px;
  margin-bottom: 0px;
  box-shadow: var(--shadow);
  gap: 10px;
}
 
.container2_ontol > div {
  background-color: var(--light-gray);
  border: none;
  padding: 12px;
  font-size: 15px;
  text-align: center;
  border-radius: calc(var(--border-radius) - 2px);
  transition: var(--transition);
}
 
/* Grid header styles */
.grid-head-wrapper {
  display: contents;
}
 
.grid-head-wrapper > .grid-head-item {
  /* background: linear-gradient(to bottom, var(--secondary-color), var(--tertiary-color)); */
  color: black;
  /* font-family: "Times New Roman", Times, serif; */
  font-size: 16px;
  font-weight: 600;
  /* padding: 14px 10px; */
  padding: 7px 5px;
  border-bottom: 2px solid var(--primary-color);
  text-shadow: 0 1px 1px rgba(0,0,0,0.1);
  letter-spacing: 0.5px;
  /* border-radius: calc(var(--border-radius) - 2px); */
  /* position: centre; */
  /* place-items: center; */
  /* display: grid ; */
}

.grid-head-wrapper_ontol {
  display: contents;
}
 
.grid-head-wrapper_ontol > .grid-head-item_ontol {
  /* #background: linear-gradient(to bottom, var(--secondary-color_ontol), var(--tertiary-color_ontol)); */
  color: black;
  font-size: 16px;
  font-weight: 600;
  /* #padding: 14px 10px; */
  padding: 7px 5px;
  border-bottom: 2px solid var(--primary-color_ontol);
  text-shadow: 0 1px 1px rgba(0,0,0,0.1);
  letter-spacing: 0.5px;
  /* border-radius: calc(var(--border-radius) - 2px); */
}

/* Grid container styles */
.container3 {
  display: grid;
  /* grid-template-columns: repeat(5, 1fr); */
  grid-template-columns: 1fr 120px 120px 120px;
  /* background-color: var(--primary-color); */
  padding: 2px;
  
  border-radius: var(--border-radius);
  margin-bottom: 2px;
  box-shadow: var(--shadow);
  #gap: 10px;
}

/* https://stackoverflow.com/questions/58251569/coloring-every-other-row-using-css-grid 
.container3 .table-row {
  display: contents;
}
.container3 .table-row:nth-child(odd) * {
  background-color: #f3f4f9;
} */

.container3 .grid-row-wrapper:nth-child(odd) .grid-item
{
  background: #fBfBfB;;
} 


 
.container3 > div {
  background-color: var(--light-gray);
  border: none;
  padding: 12px;
  font-size: 15px;
  text-align: center;
  border-radius: calc(var(--border-radius) - 2px);
  transition: var(--transition);
}

.container3_ontol {
  display: grid;
  /* grid-template-columns: repeat(4, 1fr); */
  grid-template-columns: 1fr 120px 120px;
  /* background-color: var(--primary-color); */
  padding: 2px;
  
  border-radius: var(--border-radius);
  margin-bottom: 25px;
  box-shadow: var(--shadow);
  #gap: 10px;
}

/* https://stackoverflow.com/questions/58251569/coloring-every-other-row-using-css-grid 
.container3_ontol .table-row {
  display: contents;
}
.container3_ontol .table-row:nth-child(odd) * {
  background-color: #f3f4f9;
} */

.container3_ontol .grid-row-wrapper_ontol:nth-child(odd) .grid-item
{
  background: #fBfBfB;;
} 
 
.container3_ontol > div {
  background-color: var(--light-gray);
  border: none;
  padding: 12px;
  font-size: 15px;
  text-align: center;
  border-radius: calc(var(--border-radius) - 2px);
  transition: var(--transition);
}
 
/* Grid row styles */
.grid-row-wrapper {
  display: contents;
}

 
.grid-row-wrapper > .grid-item {
  background: white;
  font-size: 20px;
  padding: 12px 10px;
  border-bottom: 1px solid #e0e0e0;
  transition: var(--transition);
  /* display: grid ; */
  /* text-align: left; */
}
 
.grid-row-wrapper:hover > .grid-item {
  background-color: var(--hover-color);
  transform: translateY(-2px);
  box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}

.grid-row-wrapper_ontol {
  display: contents;
}
 
.grid-row-wrapper_ontol > .grid-item {
  background: white;
  font-size: 20px;
  padding: 12px 10px;
  border-bottom: 1px solid #e0e0e0;
  transition: var(--transition);
}
 
.grid-row-wrapper_ontol:hover > .grid-item {
  background-color: var(--hover-color);
  transform: translateY(-2px);
  box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}
 
/* Menu Bar Styling */
.menu-bar {
  display: flex;
  #background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
  #padding: 14px 20px;
  padding: 7px 10px;
  font-family: var(--font-family);
  box-shadow: var(--shadow);
  border-radius: var(--border-radius);
  align-items: center;
  justify-content: space-between;
  #margin-bottom: 20px;
  margin-bottom: 10px;
}

.menu-bar_ontol {
  display: flex;
  #background: linear-gradient(135deg, var(--primary-color_ontol), var(--secondary-color_ontol));
  #padding: 14px 20px;
  padding: 7px 10px;
  font-family: var(--font-family);
  box-shadow: var(--shadow);
  border-radius: var(--border-radius);
  align-items: center;
  justify-content: space-between;
  #margin-bottom: 20px;
  margin-bottom: 10px;
}
 
.menu-text-bar {
  /* background: linear-gradient(135deg, var(--header-secondary-color),var(--header-primary-color)); */
  #padding: 12px 20px;
  padding: 6px 10px;
  font-family: var(--font-family);
  box-shadow: var(--shadow);
  font-size: 25px;
  text-align: center;
  color: black;
  border-radius: var(--border-radius);
  #margin-bottom: 20px;
  margin-bottom: 10px;
  letter-spacing: 0.5px;
  text-shadow: 0 1px 2px rgba(0,0,0,0.15);
}

.menu-text-bar_free {
  #background: linear-gradient(135deg, var(--secondary-color),var(--tertiary-color));
  #padding: 12px 20px;
  padding: 6px 10px;
  font-family: var(--font-family);
  #box-shadow: var(--shadow);
  font-size: 25px;
  text-align: right;
  color: white;
  border-radius: var(--border-radius);
  #margin-bottom: 20px;
  margin-bottom: 10px;
  letter-spacing: 0.5px;
  text-shadow: 0 1px 2px rgba(0,0,0,0.15);
 }

.menu-text-bar_ontol {
  #background: linear-gradient(135deg, var(--secondary-color_ontol), var(--tertiary-color_ontol));
  /* background: linear-gradient(135deg, var(--header-secondary-color), var(--header-primary-color)); */
  #padding: 12px 20px;
  padding: 6px 10px;
  font-family: var(--font-family);
  box-shadow: var(--shadow);
  font-size: 25px;
  text-align: center;
  color: black;
  border-radius: var(--border-radius);
  #margin-bottom: 20px;
  margin-bottom: 10px;
  letter-spacing: 0.5px;
  text-shadow: 0 1px 2px rgba(0,0,0,0.15);
}
 
.menu-item {
  position: relative;
  margin: 0 20px;
  color: white;
  font-size: 16px;
  cursor: pointer;
  user-select: none;
  #padding: 8px 12px;
  padding: 4px 6px;
  border-radius: var(--border-radius);
  transition: var(--transition);
}

.menu-item_ontol {
  position: relative;
  margin: 0 20px;
  color: white;
  font-size: 16px;
  cursor: pointer;
  user-select: none;
  #padding: 8px 12px;
  padding: 4px 6px;
  border-radius: var(--border-radius);
  transition: var(--transition);
}
 
.menu-item:hover {
  background-color: rgba(255, 255, 255, 0.15);
}
 
.menu-item span {
  transition: var(--transition);
  position: relative;
}
 
.menu-item span:hover {
  text-decoration: none;
}
 
.menu-item span:after {
  content: '';
  position: absolute;
  width: 0;
  height: 2px;
  bottom: -4px;
  left: 0;
  background-color: white;
  transition: var(--transition);
}
 
.menu-item:hover span:after {
  width: 100%;
}
 
/* Button styles */
.menubar-button {
  /* background: linear-gradient(to bottom, var(--secondary-color), var(--primary-color)); */
  font-family: var(--font-family);
  font-size: 14px;
  box-shadow: var(--shadow);
  color: black;
  border: none;
  #padding: 10px 20px;
  padding: 5px 10px;
  border-radius: var(--border-radius);
  cursor: pointer;
  transition: var(--transition);
  position: relative;
  overflow: hidden;
  z-index: 1;
}

/*.menubar-button#compareTwoPolicies {
  background: linear-gradient(to bottom, var(--secondary-color), var(--primary-color));
  font-family: var(--font-family);
  font-size: 18px;
  box-shadow: var(--shadow);
  color: white;
  border: none;
  #padding: 10px 20px;
  padding: 5px 10px;
  border-radius: var(--border-radius);
  cursor: pointer;
  transition: var(--transition);
  position: relative;
  overflow: hidden;
  z-index: 1;
  
  left : 200px;
} */

.menubar-button#logout {
  /* background: linear-gradient(to bottom, var(--secondary-color), var(--primary-color)); */
  font-family: var(--font-family);
  font-size: 14px;
  box-shadow: var(--shadow);
  color: black;
  border: none;
  #padding: 10px 20px;
  padding: 5px 10px;
  border-radius: var(--border-radius);
  cursor: pointer;
  transition: var(--transition);
  position: relative;
  overflow: hidden;
  z-index: 1;
  
  #left :550px;
  
}
 
.menubar-button:before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, rgba(255,255,255,0.1), transparent);
  transition: var(--transition);
  z-index: -1;
}
 
.menubar-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}
 
.menubar-button:hover:before {
  left: 100%;
}
 
.menubar-button:active {
  transform: translateY(1px);
}

.menubar-button_ontol {
  /* background: linear-gradient(to bottom, var(--secondary-color_ontol), var(--primary-color_ontol)); */
  font-family: var(--font-family);
  font-size: 14px;
  box-shadow: var(--shadow);
  color: black;
  border: none;
  #padding: 10px 20px;
  padding: 5px 10px;
  border-radius: var(--border-radius);
  cursor: pointer;
  transition: var(--transition);
  position: relative;
  overflow: hidden;
  z-index: 1;
}
 
.menubar-button_ontol:before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, rgba(255,255,255,0.1), transparent);
  transition: var(--transition);
  z-index: -1;
}
 
.menubar-button_ontol:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}
 
.menubar-button_ontol:hover:before {
  left: 100%;
}
 
.menubar-button_ontol:active {
  transform: translateY(1px);
}
 
.grid-button {
  background: linear-gradient(to bottom, var(--secondary-color), var(--primary-color));
  font-family: var(--font-family);
  font-size: 13px;
  box-shadow: var(--shadow);
  /* width: 110px; */
  color: navy;
  border: none;
  padding: 8px 12px;
  border-radius: var(--border-radius);
  cursor: pointer;
  transition: var(--transition);
  letter-spacing: 0.5px;
  position: relative;
  overflow: hidden;
  width: calc(var(--grid-button-width) - 0px)
}
 
.grid-button:before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, rgba(255,255,255,0.1), transparent);
  transition: var(--transition);
}
 
.grid-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}
 
.grid-button:hover:before {
  left: 100%;
}
 
.grid-button:active {
  transform: translateY(1px);
}


/* TAB SET UP START */
* {
  box-sizing: border-box;
}

section_tab {
  position: relative;
  width: 606px;
  margin: 0 auto;
  z-index: 0;
  color: white;
}

/ * section:after {
  content: 'Click on a tab above!';
  position: absolute;
  left: 0;
  top: 38px;
  width: 100%;
  font-size: 1.8em;
  text-align: center;
  background-color: #5E6B7F;
  padding: 40px 0;
} */

button_tab {
  cursor: pointer;
  width: 199px;
  display: inline-block;
  background-color: #5E6B7F;
  color: white;
  text-align: center;
  transition: .25s ease;
  border: none;
  padding: 10px;
  border-radius: 12px 12px 0 0;
}

div_tab:focus button, button:focus {
  background-color: #8DA1BF;
  outline: none;
}

button_tab:focus + p, div:focus P {
  display: block;
  position: absolute;
  background-color: #8DA1BF;
  height: 120px;
  width: 100%;
  left: 0;
  z-index: 2;
  outline: none;
  top: 0px;
  text-align: center;
  padding-top: 48px;
}

p_tab {
  display: none;
  font-size: 2em;
}

div_tab {
  display: inline-block;
}

div_tab:focus {
  outline: none;
}

body_tab {
  padding: 3em;
}

.p_tab {
  margin-top: 300px;
  text-align: center;
  display: block;
  font-size: 1em;
}
/* TAB SET UP END */

.nav-tabs li a {
  font-size: 18px !important;
  /* font-weight: bold !important; */
  color: black !important;
  // etc.
}

.nav-tabs  li a.active {
  font-size: 18px !important;
  font-weight: bold !important;
  color: black !important;
  // etc.
}

/* Modal container */
.modal2 {
    display: none; /* Initially hidden */
	position: fixed; /* Fix position relative to the viewport */
	top: 50%; /* Position from the top */
    left: 50%; /* Position from the left */
	transform: translate(-50%, -50%); /* Offset the modal by half of its own width and height to truly center it */
	z-index: 9999; /* Ensure the modal is above other content */
	width: 80%; /* Adjust the width of the modal */
    max-width: 700px; /* Max width */
    max-height: 80%; /* Max height */
	border-radius: 12px; /* Rounded corners */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2); /* Shadow for visual effect */
	/* padding: 20px;  Padding inside the modal */
    z-index: 9999; /* Ensure the modal is above other content */
    overflow-y: auto; /* Allow scrolling if content overflows */
    transition: opacity 0.3s ease-in-out; /* Smooth transition when showing/hiding */
	
}

/* Modal container */
.modal {
    display: none; /* Initially hidden */
    position: fixed; /* Fix position relative to the viewport */
    top: 50%; /* Position from the top */
    left: 50%; /* Position from the left */
    transform: translate(-50%, -50%); /* Offset the modal by half of its own width and height to truly center it */
    width: 80%; /* Adjust the width of the modal */
    max-width: 700px; /* Max width */
    max-height: 80%; /* Max height */
    background-color: white; /* Modal background color */
    border-radius: 12px; /* Rounded corners */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2); /* Shadow for visual effect */
    padding: 20px; /* Padding inside the modal */
    z-index: 9999; /* Ensure the modal is above other content */
    overflow-y: auto; /* Allow scrolling if content overflows */
    transition: opacity 0.3s ease-in-out; /* Smooth transition when showing/hiding */
	
}

/* Modal content */
.modal-content {
    padding: 20px;
    text-align: center;
	
}

/* Close button */
.close-button {
    position: absolute;
    top: 15px;
    right: 15px;
    font-size: 30px;
    color: #333; /* Darker close button for visibility */
    cursor: pointer;
    transition: color 0.2s; /* Smooth transition for button hover */
}

.close-button:hover {
    color: #e74c3c; /* Red color on hover */
}

.h2_modal {
    font-size: 18px;
}


/* demo 127.0.0.1:8000/policy-editor demo */
/* https://dips.soton.ac.uk/ */
/* upcast_consumer@example.com https://dips.soton.ac.uk/negotiation/organization/negotiation */
{% endblock %}
    {% block title %} Data Controller/Processor Home {% endblock %}
    {% block content %}
<!--<head>
   <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1"> -->
  <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>
<body> -->
        <main id="main">
		    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
			<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
			<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
            <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script> -->
            
			
			<div id="deletenameModal" class="modal2">
                <div class="modal-content">
                    <span class="close-button" id="closedeleteNameModalButton">&times;</span>
					<p hidden id="deletePolicyID">Dummy</p>
					<p hidden id="deletePolicyName">Dummy</p>
                    <h2 class="h2_modal" id="DeleteNameText" > <span> Delete Policy </span> </h2>
                    
                    <button id="deleteRuleButton">Submit</button>
                </div>
					
            </div>
			
			<div id="deletenameModalOntology" class="modal2">
                <div class="modal-content">
                    <span class="close-button" id="closedeleteNameModalButtonOntology">&times;</span>
					<p hidden id="deleteOntologyID">Dummy</p>
					<p hidden id="deleteOntologyName">Dummy</p>
                    <h2 class="h2_modal" id="DeleteNameTextOntology" > <span> Delete Ontology </span> </h2>
                    
                    <button id="deleteOntologyButton">Submit</button>
                </div>
					
            </div>
			
            <div id="ontoluploadModal" class="modal2">
                <div class="modal-content">
                    <span class="close-button" id="closeontoluploadModalButton">&times;</span>
                    <label for="ontolFileInput" class="dropdown-label">
                        Click to upload Ontology File
                        <input type="file" id="ontolFileInput" hidden>
                    </label>
                </div>
            </div>

			
			
			<section id="faq" class="faq">
                    <!-- <header class="section-header">
                        <p>Welcome {{ user.username}} this is the Policy Editor</p>
                    </header> -->
					
					
					
					<body class="text-center">
					    <!-- <form>
                        
                            <label for="data"> You are currently logged into:</label><br>
						    <input id="data" type="text" name="data" value={{ request.get_host }}><br> -->
							<!-- <input id="data" type="text" name="data" value={{ request.get_host }}><br> -->
							
                            <!-- <input id="submit" type="submit" value="Submit"> -->
                        <!-- </form> -->
						
						
						<div class="control_main_index_wrapper", id="control_main_index_wrapper">
						
						
						<!-- <div class="container">
							    <p>Ver: Alpha - 0.2</p>
						</div> -->
						
						<div class="container">
							  <p>&nbsp</p>
						</div>
						
						
						
						<div class="menu-text-bar_free">
						        <a  class="menubar-button" id="settings"> Settings</a>
							    <a  class="menubar-button" href="{% url 'logout' %}" id="logout"> Logout</a>
						    </div>
							
						<div class="container">
							    <p>Ver: Alpha - 0.2</p>
						</div>	
												
						<header class="section-header">
                            <p>Welcome {{ user.username}} this is the Policy Editor</p>
                        </header>
						
						
						

<div class="TabContainer">
  <!-- https://getbootstrap.com/docs/5.0/components/navs-tabs/
  https://www.w3schools.com/bootstrap/tryit.asp?filename=trybs_ref_js_tab_events2&stacked=h -->
  <ul class="nav nav-tabs">
    <li class="nav-item"><a class="nav-link active" href="#home">Your Policies</a></li>
    <li class="nav-item"><a class="nav-link" href="#menu1">Your Ontologies</a></li>
    
  </ul>

  <div class="tab-content">
  <div id="home" class="tab-pane fade in active">
					
						<!-- <div class="menu-text-bar">
						    Your Current Policies
						</div> -->
						
						
						
					    <!-- START Menu Bar -->
                        <div class="menu-bar">
                       					
					        <!-- START new rule button -->
					        <!-- CMADD - These are left here to allow old code to reference -->
					        <!--         Should be removed in a fuller tidy up -->
                            <div class="menu-item">
                                                    
                                <!-- <button id="createNewPolicy" class="menubar-button" style="background-color:#34ebd8">Create New Policy</button>
								<button id="createNewPolicyFromUpload" class="menubar-button" style="background-color:#34ebd8">Create New Policy From Upload</button> -->
								<button id="createNewPolicy" class="menubar-button" >Create New Policy</button>
								<button id="createNewPolicyFromUpload" class="menubar-button" >Upload New Policy</button>
								<button id="compareTwoPolicies" class="menubar-button" >Compare Two Policies</button>
								<button id="reviewPublicRepository" class="menubar-button" style="display: none">Review Public Repository </button>
                                
								<script type='text/javascript'>	
							       								   
								   $('#createNewPolicy').off('click').click(function() {
                                        var mode="create"
										
										selectedValues="... Create new policy ...."
										console.log("The selected value is " + selectedValues);
									
										var targetURL = "/policy-editor/update?policy=" + selectedValues + "&mode=" + mode;	
										/* window.open(targetURL,"_blank", "popup") */
										window.open(targetURL,"_blank")
                                   });
								   
								   $('#createNewPolicyFromUpload').off('click').click(function() {
                                        var mode="create"
										
										selectedValues="... Create new policy via upload ...."
										console.log("The selected value is " + selectedValues);
									
										var targetURL = "/policy-editor/update?policy=" + selectedValues + "&mode=" + mode;	
										/* window.open(targetURL,"_blank", "popup") */
										window.open(targetURL,"_blank")
                                   });
								   
								   $('#compareTwoPolicies').off('click').click(function() {
                                        
									
										var targetURL = "/policy-editor/compare" ;	
										window.open(targetURL,"_blank")
                                   });
								   
								   $('#reviewPublicRepository').off('click').click(function() {
                                        
									
										var targetURL = "/policy-editor/review_public" ;	
										window.open(targetURL,"_blank", "popup")
                                   });

								   
                                						   
						        </script>
                            </div>
					        <!-- END Edit Menu -->
                        </div>
				        <!-- END Menu Bar -->
						 
						<!-- CM2403 -->
						<div class="container2", id="policy_grid_head">
                            
                                <div class="grid-head-wrapper">
								    <div class="grid-head-item">Policy Name</div>
                                    <!-- <div class="grid-head-item">Policy Visibility</div> -->
									<div class="grid-head-item">Actions</div>
								    <div class="grid-head-item"></div>
								    <div class="grid-head-item"></div>
									<div class="grid-head-item"></div>
								</div>
						</div>
						
						
						<div class="container3", id="policy_grid">		
								<div class="grid-row-wrapper" style="display: none">
								    <div class="grid-item" id="policyName">
									    <span id="policyNameSpan">ExamplePolicy_1</span>
									</div>
                                    <!-- <div class="grid-item" id="policyVisibility">
									    <span id="policyVisibilitySpan">Private</span>
									</div> -->
								    
                                    <!-- <div class="grid-item">
								        <button id="editPolicy" class="grid-button" style="background-color:#34ebd8">Edit</button>
								    </div> -->
                                   
									<div class="grid-item">
								        <button id="downloadPolicy" class="grid-button" style="background-color:#34ebd8">Download</button>
								    </div>
									
									<div class="grid-item">
								        <button id="togglePolicy" class="grid-button" style="background-color:#34ebd8">Publish</button>
								    </div>
									
									 <div class="grid-item">
								        <button id="deletePolicy" class="grid-button" style="background-color:#34ebd8">Delete  </button>
								    </div>
								</div>
                                				
																	
								<!-- <div class="grid-row-wrapper">
								    <div class="grid-item">Dummy_1</div>
                                    <div class="grid-item">Private</div>
								    <div class="grid-item">
								        <button id="togglePolicy" class="grid-button" style="background-color:#34ebd8">Set Public</button>
								    </div>
                                    <div class="grid-item">
								        <button id="editPolicy" class="grid-button" style="background-color:#34ebd8">Edit Policy</button>
								    </div>
                                    <div class="grid-item">
								        <button id="deletePolicy" class="grid-button" style="background-color:#34ebd8">Delete Policy</button>
								    </div>
								</div>
								
                                <div class="grid-row-wrapper">
								    <div class="grid-item">Dummy_2</div>
                                    <div class="grid-item">Public</div>
								    <div class="grid-item">
								        <button id="togglePolicy" class="grid-button" style="background-color:#34ebd8">Set Private</button>
								    </div>
                                    <div class="grid-item">
								        <button id="editPolicy" class="grid-button" style="background-color:#34ebd8">Edit Policy</button>
								    </div>
                                    <div class="grid-item">
								        <button id="deletePolicy" class="grid-button" style="background-color:#34ebd8">Delete Policy</button>
								    </div>
								</div> -->
								
							<script type='text/javascript'>	
							    {% for SavedPol in SavedPols %}			       
							   
							        var $originalRow = $('.grid-row-wrapper').first();
                                    var $newRow = $originalRow.clone();
							        $newRow.css("display", "contents");
								   
								    $newRow.find('#policyName span').text("{{ SavedPol.name }}");
								    ProtectionText="Unknown"
								    ToggleText="Unknown"
									/* 0 public 1 private */
								    if ( {{ SavedPol.protection }} == 0 ){
								        ProtectionText='Public'
									    ToggleText='Private'
								    }
								    else{
								        ProtectionText='Private'
									    ToggleText='Public'
								    }
								    
									/* $newRow.find('#policyVisibility span').text(ProtectionText);
									
									if (ProtectionText == "Public"){
									    $newRow.find('#policyVisibility span').html("<i class='fa fa-eye' style='font-size:24px'></i>");
									} else {
									    $newRow.find('#policyVisibility span').html("<i class='fa fa-eye-slash' style='font-size:24px'></i>");
									}  */
									
								    $newRow.find('#togglePolicy').text("Set " + ToggleText);
									
									if (ProtectionText == "Public"){
									    $newRow.find('#togglePolicy').html("<span>Publish&nbsp&nbsp<\span> <i class='fa fa-eye' style='font-size:16px;background-color:white'></i>");
									} else {
									    $newRow.find('#togglePolicy').html("<span>Publish&nbsp&nbsp<\span> <i class='fa fa-eye-slash' style='font-size:16px;background-color:white'></i>");
									}
									
									if (ProtectionText == "Public"){
									    $newRow.find('#togglePolicy').text("Protect");
									} else {
									    $newRow.find('#togglePolicy').text("Publish");
									} 
									
									/* $newRow.find('#editPolicy').html("<i class='fa fa-edit' style='font-size:16px'></i>"); 
									$newRow.find('#deletePolicy').html("<i class='fa fa-trash' style='font-size:16px'></i>");
									$newRow.find('#downloadPolicy').html("<i class='fa fa-download' style='font-size:16px'></i>");*/
									$newRow.find('#deletePolicy').css("background","#f0b1b1");
									$newRow.find('#editPolicy').css("background","#f0d795");
									$newRow.find('#togglePolicy').css("background","#99d7f2");
									
								   
							        $newRow.appendTo('.container3'); 
								   
								   
								    /*$newRow.find('#editPolicy').off('click').click(function() { */
									$newRow.find('#policyName').off('click').click(function() {
                                         var mode="update"
										
										 selectedValues="{{ SavedPol.name }}"
										 console.log("The selected value is " + selectedValues);
									
										 var targetURL = "/policy-editor/update?policy=" + selectedValues + "&mode=" + mode;	
										 /* window.open(targetURL,"_blank", "popup") */
										 window.open(targetURL,"_blank")
                                    });
									
									$newRow.find('#deletePolicy').off('click').click(function() {
                                         /* var mode="delete"
										
										 selectedValues="{{ SavedPol.name }}"
										 console.log("The selected value is " + selectedValues);
									
										 var targetURL = "/policy-editor/update?policy=" + selectedValues + "&mode=" + mode;	
										 window.open(targetURL,"_blank", "popup")*/
										 
										 $('#deletenameModal').find('h2').text("Delete Policy - {{ SavedPol.name }}"); 
										 $('#deletenameModal').find('#deletePolicyID').text("{{ SavedPol.id }}");
                                         $('#deletenameModal').find('#deletePolicyName').text("{{ SavedPol.name }}");										 
										 
										 deletenameModal.style.display = 'block';
										 
										 
                                    });
									
									$newRow.find('#downloadPolicy').off('click').click(function() {
                                         var mode="read"
										
										 selectedValues="{{ SavedPol.name }}"
										 console.log("The selected value is " + selectedValues);
									
										 var targetURL = "/policy-editor/update?policy=" + selectedValues + "&mode=" + mode;	
										 window.open(targetURL,"_blank", "popup")
                                    });			
								   
								   
								   
								    
									$newRow.find('#togglePolicy').off('click').click(function() {
	   
	                                    this_toggle_button=$(this);
										
										toggle_text=this_toggle_button.text();
										
										if (toggle_text == "Protect"){
									        ProtectionText = "Public";
									    } else {
									        ProtectionText = "Private";
									    } 
										
										
										selectedValues="{{ SavedPol.name }}"
										selectedId="{{ SavedPol.id }}"
                                        console.log("The ontology to make public is  " + selectedValues);
										console.log("The ontology id to make public is  " + selectedId);
										console.log("The current status is " + ProtectionText);
	                                    	 
	                                    let check_rules=[];
	
	    
	                                    $.ajax({
                                           type: 'GET',
				
				
			
                                            url: '/policy-editor/organization/get_uploaded_rules/',  // Endpoint to fetch uploaded rules 
                                            success: function (response) {
                                                console.log("make public get uploaded AJAX call successful" );
                                                // Check if any rules exist
                                                if (response.odrls && response.odrls.length > 0) {
				                                    console.log("Processing the policy list " + response.odrls.length);
                                                    // Populate the list with ontologies
					                                response.odrls.forEach(function (policy) {
					                                    console.log("In make public returned items next " + policy.name + " : " + policy.id);
					        
                                                        check_rules.push({name: policy.name, id: policy.id} );
						                                console.log("In make public the length of the array is " + check_rules.length);	
                                                    });
					
					                                // This is here because .ajax is asynchronous so ensures that 
					                                //    global check_rules is only accessed after call completed
					                                usemakepublicCheckPols();
					
		
                    
                                                } else {
                                                    console.error('Error fetching policies in make public:', error);
                                                }

               
                                            },
                                                error: function (error) {
                                                console.error('Error fetching policies in make public:', error);
                                            }
                                        });
		
	                                    function usemakepublicCheckPols(){
	                                        console.log("AFTER AJAX in delete. The length of the array is " + check_rules.length);	
											
		                                    let policy_name_id = check_rules.find(policy_name_id => policy_name_id.name === selectedValues);
	                                        console.log("The policy id to toggle is " + policy_name_id.id);
	
	                                        makepublicPolicy(policy_name_id.id);
			
						
	                                    }
	   
        
                                    });
	
   
                                    // Make an policy public
                                    function makepublicPolicy(id) {
	      
	    
                                        fetch(`/policy-editor/organization/toggle_policy_api_visibility/${id}/`, { method: 'POST', headers: {
                                                                   'X-CSRFToken': '{{ csrf_token }}', // Include CSRF token
                                                  } }) 
                                        .then(response => {
                                            if (response.ok) {
                                                console.log(response.statusText);
					                            /* alert(response.statusText); */
					                            /*window.location.href = (window.location.href.split('?')[0])*/
												
												if ( ProtectionText=='Private' ){
								                    ProtectionText='Public';
								                }
								                else{
								                    ProtectionText='Private';
								                }
												
												console.log("The protection text has been changed to " + ProtectionText);
												
												/*if (ProtectionText == "Public"){
												    
									                this_toggle_button.html("<span>Publish&nbsp&nbsp<\span> <i class='fa fa-eye' style='font-size:16px;background-color:white'></i>");
													
									            } else {
									                
													this_toggle_button.html("<span>Publish&nbsp&nbsp<\span> <i class='fa fa-eye-slash' style='font-size:16px;background-color:white'></i>");
													
									            } */
												
												if (ProtectionText == "Public"){
									                this_toggle_button.text("Protect");
									            } else {
									                this_toggle_button.text("Publish");
									            }
												
                                            } else { 
                                                console.error("Error toggling policy API visibility: ", response.statusText);
                                            }
                                        })
                                        .catch(error => {
                                            console.error("Error toggling policy API visibility: ", error);
                                        });
                                    }

                                    						

								   
                                {% endfor %}								   
						    </script>
                            
                        </div>

                        <div class="menu-text-bar_free">
						    <p>
						</div>
  </div>
  
  <div id="menu1" class="tab-pane fade in">					
						<!-- <div class="menu-text-bar_ontol">
						    Your Current Ontologies
						</div> -->
						
					    <!-- START Menu Bar -->
                        <div class="menu-bar_ontol">
                       					
					        <!-- START new rule button -->
					        <!-- CMADD - These are left here to allow old code to reference -->
					        <!--         Should be removed in a fuller tidy up -->
                            <div class="menu-item_ontol">
                                                    
                                <!-- <button id="createNewPolicy" class="menubar-button" style="background-color:#34ebd8">Create New Policy</button>
								<button id="createNewPolicyFromUpload" class="menubar-button" style="background-color:#34ebd8">Create New Policy From Upload</button> -->
								<button id="createNewOntology" class="menubar-button_ontol" >Upload New Ontology</button>
								
                                
								<script type='text/javascript'>	
							       								   
								   $('#createNewOntology').off('click').click(function() {
                                        /* var mode="create"
										
										selectedValues="... Add new ontology ...."
										console.log("The selected value is " + selectedValues);
									
										var targetURL = "/policy-editor/update_ontol?ontology=" + selectedValues + "&mode=" + mode;	
										window.open(targetURL,"_blank", "popup")*/
										
										const OntolUploadModal = document.getElementById('ontoluploadModal');
										OntolUploadModal.style.display = 'block';
                                   });
								   
                                						   
						        </script>
                            </div>
					        <!-- END Edit Menu -->
                        </div>
				        <!-- END Menu Bar -->


						<!-- CM2403 -->
						<div class="container2_ontol", id="ontology_grid_head">
                            
                                <div class="grid-head-wrapper_ontol">
								    <div class="grid-head-item_ontol">Ontology Name</div>
                                    <!-- <div class="grid-head-item">Policy Visibility</div> -->
									<div class="grid-head-item_ontol">Toggle API Visibility</div>
								    <div class="grid-head-item_ontol">Edit this ontology</div>
								    <div class="grid-head-item_ontol">Delete this ontology</div>
								</div>
						</div>
						
						
						<div class="container3_ontol", id="ontology_grid">		
								<div class="grid-row-wrapper_ontol" style="display: none">
								    <div class="grid-item" id="ontologyName">
									    <span id="policyNameSpan">ExampleOntology_1</span>
									</div>
                                    <!-- <div class="grid-item" id="policyVisibility">
									    <span id="policyVisibilitySpan">Private</span>
									</div> -->
								   
                                    <!-- <div class="grid-item">
								        <button id="editOntology" class="grid-button" style="background-color:#34ebd8">Edit</button>
								    </div> -->
                                    
									 <div class="grid-item">
								        <button id="toggleOntology" class="grid-button" style="background-color:#34ebd8">Publish</button>
								    </div>
									
									<div class="grid-item">
								        <button id="deleteOntology" class="grid-button" style="background-color:#34ebd8">Delete</button>
								    </div>
								</div>
                                				
																	
								<!-- <div class="grid-row-wrapper">
								    <div class="grid-item">Dummy_1</div>
                                    <div class="grid-item">Private</div>
								    <div class="grid-item">
								        <button id="togglePolicy" class="grid-button" style="background-color:#34ebd8">Set Public</button>
								    </div>
                                    <div class="grid-item">
								        <button id="editPolicy" class="grid-button" style="background-color:#34ebd8">Edit Policy</button>
								    </div>
                                    <div class="grid-item">
								        <button id="deletePolicy" class="grid-button" style="background-color:#34ebd8">Delete Policy</button>
								    </div>
								</div>
								
                                <div class="grid-row-wrapper">
								    <div class="grid-item">Dummy_2</div>
                                    <div class="grid-item">Public</div>
								    <div class="grid-item">
								        <button id="togglePolicy" class="grid-button" style="background-color:#34ebd8">Set Private</button>
								    </div>
                                    <div class="grid-item">
								        <button id="editPolicy" class="grid-button" style="background-color:#34ebd8">Edit Policy</button>
								    </div>
                                    <div class="grid-item">
								        <button id="deletePolicy" class="grid-button" style="background-color:#34ebd8">Delete Policy</button>
								    </div>
								</div> -->
								
							<script type='text/javascript'>	
							    {% for CustOnt in CustOntList %}			       
							   
							        var $originalRow_ontol = $('.grid-row-wrapper_ontol').first();
                                    var $newRow_ontol = $originalRow_ontol.clone();
							        $newRow_ontol.css("display", "contents");
								   
								    $newRow_ontol.find('#ontologyName span').text("{{ CustOnt.name }}");
								    ProtectionText="Unknown"
								    ToggleText="Unknown"
								    if ( {{ CustOnt.protection }} == 0 ){
								        ProtectionText='Public'
									    ToggleText='Private'
								    }
								    else{
								        ProtectionText='Private'
									    ToggleText='Public'
								    }
								    
									/* $newRow.find('#policyVisibility span').text(ProtectionText);
									
									if (ProtectionText == "Public"){
									    $newRow.find('#policyVisibility span').html("<i class='fa fa-eye' style='font-size:24px'></i>");
									} else {
									    $newRow.find('#policyVisibility span').html("<i class='fa fa-eye-slash' style='font-size:24px'></i>");
									}  */
									
								    $newRow_ontol.find('#toggleOntology').text("Set " + ToggleText);
									
									if (ProtectionText == "Public"){
									    $newRow_ontol.find('#toggleOntology').html("<span>Publish&nbsp&nbsp<\span> <i class='fa fa-eye' style='font-size:16px'></i>");
									} else {
									    $newRow_ontol.find('#toggleOntology').html("<span>Publish&nbsp&nbsp<\span>  <i class='fa fa-eye-slash' style='font-size:16px'></i>");
									}
									
									if (ProtectionText == "Public"){
									    $newRow_ontol.find('#toggleOntology').text("Protect");
									} else {
									    $newRow_ontol.find('#toggleOntology').text("Publish");
									}
									
									/* $newRow_ontol.find('#editOntology').html("<i class='fa fa-edit' style='font-size:16px'></i>");
									$newRow_ontol.find('#deleteOntology').html("<i class='fa fa-trash' style='font-size:16px'></i>"); */
	
									
									$newRow_ontol.find('#deleteOntology').css("background","#f0b1b1");
									$newRow_ontol.find('#editOntology').css("background","#f0d795");
									$newRow_ontol.find('#toggleOntology').css("background","#99d7f2");
									
									$newRow_ontol.appendTo('.container3_ontol'); 
								   
								   
								    /* $newRow_ontol.find('#editOntology').off('click').click(function() { */
									$newRow_ontol.find('OntologyName').off('click').click(function() {
                                         var mode="update"
										
										 selectedValues="{{ CustOnt.name }}"
										 console.log("The selected value is " + selectedValues);
									
										 var targetURL = "/policy-editor/update_ontol?ontology=" + selectedValues + "&mode=" + mode;	
										 /* window.open(targetURL,"_blank")*/
                                    });
									
									/* $newRow_ontol.find('#deleteOntology').off('click').click(function() {
                                         var mode="delete"
										
										 selectedValues="{{ CustOnt.name }}"
										 console.log("The selected value is " + selectedValues);
									
										 var targetURL = "/policy-editor/update_ontol?ontology=" + selectedValues + "&mode=" + mode;	
										 window.open(targetURL,"_blank", "popup")
                                    }); */
									
									$newRow_ontol.find('#deleteOntology').off('click').click(function() {
                                         /* var mode="delete"
										
										 selectedValues="{{ SavedPol.name }}"
										 console.log("The selected value is " + selectedValues);
									
										 var targetURL = "/policy-editor/update?policy=" + selectedValues + "&mode=" + mode;	
										 window.open(targetURL,"_blank", "popup")*/
										 
										 console.log("The delete button has been pressed")
										 
										 $('#deletenameModalOntology').find('h2').text("Delete Ontology - {{ CustOnt.name }}"); 
										 $('#deletenameModalOntology').find('#deleteOntologyID').text("{{ CustOnt.id }}"); 
										 $('#deletenameModalOntology').find('#deleteOntologyName').text("{{ CustOnt.name }}");
										 
										 
										 
										 deletenameModalOntology.style.display = 'block';
										 
										 
                                    });
								   
								   
								   
								    
									$newRow_ontol.find('#toggleOntology').off('click').click(function() {
	   
	                                    selectedValues="{{ CustOnt.name }}"
                                        console.log("The ontology to make public is  " + selectedValues);
										
										this_toggle_button=$(this);
										
										toggle_text=this_toggle_button.text();
										
										if (toggle_text == "Protect"){
									        ProtectionText = "Public";
									    } else {
									        ProtectionText = "Private";
									    } 
										
	                                    	 
	                                    let check_ontols=[];
	
	    
	                                    $.ajax({
                                           type: 'GET',
				
				
			
                                            url: '/policy-editor/organization/get_uploaded_ontologies/',  // Endpoint to fetch uploaded rules 
                                            success: function (response) {
                                                console.log("make public get uploaded AJAX call successful" );
                                                // Check if any rules exist
                                                if (response.ontologies && response.ontologies.length > 0) {
				                                    console.log("Processing the ontologies list " + response.ontologies.length);
                                                    // Populate the list with ontologies
					                                response.ontologies.forEach(function (ontol) {
					                                    console.log("In make public returned items next " + ontol.name + " : " + ontol.id);
					        
                                                        check_ontols.push({name: ontol.name, id: ontol.id} );
						                                console.log("In make public the length of the array is " + check_ontols.length);	
                                                    });
					
					                                // This is here because .ajax is asynchronous so ensures that 
					                                //    global check_rules is only accessed after call completed
					                                usemakepublicCheckOntols();
					
		
                    
                                                } else {
                                                    console.error('Error fetching policies in make public:', error);
                                                }

               
                                            },
                                                error: function (error) {
                                                console.error('Error fetching policies in make public:', error);
                                            }
                                        });
		
	                                    function usemakepublicCheckOntols(){
	                                        console.log("AFTER AJAX in delete. The length of the array is " + check_ontols.length);	
		                                    let ontol_name_id = check_ontols.find(ontol_name_id => ontol_name_id.name === selectedValues);
	                                        console.log("The ontology id to toggle is " + ontol_name_id.id);
	
	                                        makepublicOntology(ontol_name_id.id);
			
						
	                                    }
	   
        
                                    });
	
   
                                    // Make an policy public
                                    function makepublicOntology(id) {
	      
	    
                                        fetch(`/policy-editor/organization/toggle_ontology_api_visibility/${id}/`, { method: 'POST', headers: {
                                                                   'X-CSRFToken': '{{ csrf_token }}', // Include CSRF token
                                                  } }) 
                                        .then(response => {
                                            if (response.ok) {
                                                console.log(response.statusText);
					                            /* alert(response.statusText); 
					                            window.location.href = (window.location.href.split('?')[0]) */
												
												if ( ProtectionText=='Private' ){
								                    ProtectionText='Public';
								                }
								                else{
								                    ProtectionText='Private';
								                }
												
												console.log("The protecttion text has been changed to " + ProtectionText);
												
												/* if (ProtectionText == "Public"){
												    
									                this_toggle_button.html("<span>Publish&nbsp&nbsp<\span> <i class='fa fa-eye' style='font-size:16px;background-color:white'></i>");
													
									            } else {
									                
													this_toggle_button.html("<span>Publish&nbsp&nbsp<\span> <i class='fa fa-eye-slash' style='font-size:16px;background-color:white'></i>");
													
									            } */
												
												if (ProtectionText == "Public"){
									                this_toggle_button.text("Protect");
									            } else {
									                this_toggle_button.text("Publish");
									            }
												
                                            } else { 
                                                console.error("Error toggling ontology API visibility: ", response.statusText);
                                            }
                                        })
                                        .catch(error => {
                                            console.error("Error toggling ontology API visibility: ", error);
                                        });
                                    }	

								   
                                {% endfor %}								   
						    </script>
                            
                        </div>
	</div> 
    </div>
    <!-- <hr>
    <p class="act"><b>Active Tab</b>: <span></span></p>
    <p class="prev"><b>Previous Tab</b>: <span></span></p> -->
</div>	
						</div>



					

	
 </script>
 
 <script>
$(document).ready(function(){
  $(".nav-tabs a").click(function(){
    $(this).tab('show');
  });
  /* $('.nav-tabs a').on('shown.bs.tab', function(event){
    var x = $(event.target).text();         // active tab
    var y = $(event.relatedTarget).text();  // previous tab
    $(".act span").text(x);
    $(".prev span").text(y);
  }); */
  
  const closedeleteNameModalButton = document.getElementById('closedeleteNameModalButton');
  
  // Close delete modal when clicking on the close button
  closedeleteNameModalButton.addEventListener('click', () => {
      deletenameModal.style.display = 'none';
  });

  // Close delete modal when clicking outside the modal content
  window.addEventListener('click', (event) => {
        if (event.target === deletenameModal) {
            deletenameModal.style.display = 'none';
        }
  });
  
  
  const deletePolicyButton = document.getElementById('deleteRuleButton');
	
  deletePolicyButton.addEventListener('click', (e) => {
  	   
     	  
	  ResID=$('#deletenameModal').find('#deletePolicyID').text(); 
	  ResName=$('#deletenameModal').find('#deletePolicyName').text(); 
	  
	  delete_rule(ResID, ResName);
	  
	  // Function to fetch and display rule details
     function delete_rule(ruleId, ruleName) {
        $.ajax({
            type: 'DELETE', // HTTP DELETE method
            url: `/policy-editor/organization/delete_rule/${ruleId}/`, // Endpoint to delete the rule by ID
            headers: {
                'X-CSRFToken': '{{ csrf_token }}' // CSRF token for secure requests
            },
            success: function (response) {
                //populate_rules();
				// window.close();
				// alert('Successfully deleted rule.'); //
				
				// Find the row associated with this policy Name and ID //
				$('.grid-row-wrapper').each(function(index){
				    // Skip the template entry //
				    if ( index > 0 ){
					    name=$(this).find('#policyName span').text()
					
					    console.log("The name extracted is " + name + " the rile name is " + ruleName);
					
					    if ( name == ruleName){
					        $(this).remove();
					    }
					}
				});
				deletenameModal.style.display = 'none';
			
            },
            error: function (error) {
                console.error('Error deleting the rule:', error);
                alert('Failed to delete the rule. Please try again.');
            }
        });
      } 
	   
        
  });
  
  
  const closedeleteNameModalButtonOntology = document.getElementById('closedeleteNameModalButtonOntology');
  
  // Close delete modal when clicking on the close button
  closedeleteNameModalButtonOntology.addEventListener('click', () => {
      deletenameModalOntology.style.display = 'none';
  });

  // Close delete modal when clicking outside the modal content
  window.addEventListener('click', (event) => {
        if (event.target === deletenameModalOntology) {
            deletenameModalOntology.style.display = 'none';
        }
  });
  
  
  const deleteOntologyButton = document.getElementById('deleteOntologyButton');
	
  deleteOntologyButton.addEventListener('click', (e) => {
  	   
     	  
	  Res=$('#deletenameModalOntology').find('#deleteOntologyID').text(); 
	  ResName=$('#deletenameModalOntology').find('#deleteOntologyName').text(); 
	  
	  delete_ontology(Res, ResName);
	  
	  // Function to fetch and display rule details
     function delete_ontology(ruleId, ruleName) {
        $.ajax({
            type: 'DELETE', // HTTP DELETE method
            url: `/policy-editor/organization/delete_ontology/${ruleId}/`, // Endpoint to delete the ontology by ID
            headers: {
                'X-CSRFToken': '{{ csrf_token }}' // CSRF token for secure requests
            },
            success: function (response) {
                //populate_rules();
				// window.close();
				// alert('Successfully deleted ontology.'); //
				
				// Find the row associated with this policy Name and ID //
				$('.grid-row-wrapper_ontol').each(function(index){
				    // Skip the template entry //
				    if ( index > 0 ){
					    name=$(this).find('#ontologyName span').text()
					
					    console.log("The name extracted is " + name + " the rile name is " + ruleName);
					
					    if ( name == ruleName){
					        $(this).remove();
					    }
					}
				});
				
				deletenameModalOntology.style.display = 'none';
			
            },
            error: function (error) {
                console.error('Error deleting the ontology:', error);
                alert('Failed to delete the rule. Please try again.');
            }
        });
      } 
	   
        
  });
  
  
  // Adding a complete modal to cater for upload mode
	const OntolUploadModal = document.getElementById('ontoluploadModal');
	const closeontolUploadModalButton = document.getElementById('closeontoluploadModalButton');
	
	// Close modal when clicking on the close button
    closeontolUploadModalButton.addEventListener('click', () => {	    
        OntolUploadModal.style.display = 'none';
    });

    // Close modal when clicking outside the modal content
    window.addEventListener('click', (event) => {
        if (event.target === OntolUploadModal) {
            ontolUploadModal.style.display = 'none';
        }
    });
	
	
	document.getElementById('ontolFileInput').addEventListener('change', async (event) => {
        const file = event.target.files[0];

        if (file) {
            try {
                const formData = new FormData();
                formData.append('ontologyFile', file); // Append the file to FormData

                // Send the file to the backend
				
                const response = await fetch('/policy-editor/organization/custom-ontology-upload', {
                        method: 'POST',
                        headers: {
                            'X-CSRFToken': '{{ csrf_token }}', // Include CSRF token
                        },
                        body: formData, // Send FormData with the file
                    });

                if (response.ok) {
                    alert('Ontology file uploaded and saved successfully!');
				    /* window.location.href = (window.location.href.split('?')[0]) + "?ontology="+$('#ontolFileInput').val().replace(/^.*[\\/]/, '') +"&mode=update"; */
                } else {
                    alert('Failed to upload ontology file.');
                }
				
			    ontolUploadModal=document.getElementById('ontoluploadModal');
	            ontolUploadModal.style.display = 'none';
					
            } catch (error) {
                console.error('Error reading or uploading the file:', error);
                alert('An error occurred. Please try again.');
            }
        } else {
            alert('No file selected.');
        }
    });
});

 </script>

<!-- </body> -->
 
 {% endblock %}